<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLX Classifieds App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: auto;
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #333;
        }
        input, button, select {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            background: #28a745;
            color: #fff;
            border: none;
        }
        button:hover {
            background: #218838;
        }
        #product-list {
            list-style: none;
            padding: 0;
        }
        #product-list li {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 10px 0;
        }
        img {
            max-width: 100px;
            margin-right: 10px;
        }
        .comment-section {
            margin-top: 10px;
        }
        .likes {
            display: inline-block;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>PLX Classifieds App</h1>

        <h2>Add a Product</h2>
        <input type="text" id="product-title" placeholder="Product Title" required>
        <input type="text" id="product-description" placeholder="Description" required>
        <input type="text" id="product-price" placeholder="Price" required>
        <select id="product-category" required>
            <option value="">Select Category</option>
            <option value="Electronics">Electronics</option>
            <option value="Furniture">Furniture</option>
            <option value="Clothing">Clothing</option>
            <option value="Vehicles">Vehicles</option>
            <option value="Others">Others</option>
        </select>
        <input type="file" id="product-image" accept="image/*" required>
        <button id="add-product">Add Product</button>

        <h2>Search Products</h2>
        <input type="text" id="search-bar" placeholder="Search products..." />

        <h2>Products</h2>
        <ul id="product-list"></ul>
    </div>

    <script>
        let products = JSON.parse(localStorage.getItem('products')) || [];

        // Function to add product
        document.getElementById('add-product').addEventListener('click', function() {
            const title = document.getElementById('product-title').value;
            const description = document.getElementById('product-description').value;
            const price = document.getElementById('product-price').value;
            const category = document.getElementById('product-category').value;
            const image = document.getElementById('product-image').files[0];

            if (!title || !description || !price || !category || !image) {
                alert('Please fill in all fields!');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const product = {
                    title,
                    description,
                    price,
                    category,
                    image: e.target.result,
                    likes: 0,
                    comments: []
                };
                products.push(product);
                localStorage.setItem('products', JSON.stringify(products));
                displayProducts();
                clearInputFields();
            };
            reader.readAsDataURL(image);
        });

        // Function to clear input fields
        function clearInputFields() {
            document.getElementById('product-title').value = '';
            document.getElementById('product-description').value = '';
            document.getElementById('product-price').value = '';
            document.getElementById('product-category').value = '';
            document.getElementById('product-image').value = '';
        }

        // Function to display products
        function displayProducts() {
            const productList = document.getElementById('product-list');
            productList.innerHTML = '';

            products.forEach((product, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <img src="${product.image}" alt="${product.title}">
                    <strong>${product.title}</strong> (${product.category})<br>
                    <p>${product.description}</p>
                    <p>Price: $${product.price}</p>
                    <span class="likes">üëç Likes: ${product.likes}</span>
                    <button onclick="likeProduct(${index})">Like</button>
                    <div class="comment-section">
                        <input type="text" id="comment-input-${index}" placeholder="Add a comment" />
                        <button onclick="addComment(${index})">Comment</button>
                        <div id="comments-${index}">
                            ${product.comments.map(comment => `<p>${comment}</p>`).join('')}
                        </div>
                    </div>
                `;
                productList.appendChild(li);
            });
        }

        // Function to like product
        function likeProduct(index) {
            products[index].likes++;
            localStorage.setItem('products', JSON.stringify(products));
            displayProducts();
        }

        // Function to add comment
        function addComment(index) {
            const commentInput = document.getElementById(`comment-input-${index}`);
            const comment = commentInput.value;
            if (comment) {
                products[index].comments.push(comment);
                localStorage.setItem('products', JSON.stringify(products));
                commentInput.value = ''; // Clear input
                displayProducts(); // Refresh product list
            } else {
                alert('Please enter a comment!');
            }
        }

        // Function for searching products
        document.getElementById('search-bar').addEventListener('input', function() {
            const query = this.value.toLowerCase();
            const filteredProducts = products.filter(product => 
                product.title.toLowerCase().includes(query) || 
                product.category.toLowerCase().includes(query)
            );
            displayFilteredProducts(filteredProducts);
        });

        function displayFilteredProducts(filteredProducts) {
            const productList = document.getElementById('product-list');
            productList.innerHTML = '';

            filteredProducts.forEach((product, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <img src="${product.image}" alt="${product.title}">
                    <strong>${product.title}</strong> (${product.category})<br>
                    <p>${product.description}</p>
                    <p>Price: $${product.price}</p>
                    <span class="likes">üëç Likes: ${product.likes}</span>
                    <button onclick="likeProduct(${index})">Like</button>
                    <div class="comment-section">
                        <input type="text" id="comment-input-${index}" placeholder="Add a comment" />
                        <button onclick="addComment(${index})">Comment</button>
                        <div id="comments-${index}">
                            ${product.comments.map(comment => `<p>${comment}</p>`).join('')}
                        </div>
                    </div>
                `;
                productList.appendChild(li);
            });
        }

        // Initial display of products
        displayProducts();
    </script>
</body>
</html>
